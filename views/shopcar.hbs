<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>shopping cart</title>
    <link rel="stylesheet" type="text/css" href="../header.css">
    <style>
        header{
            height: 36px;
            border: 1px solid #0000001c;
            border-top: 0;
            border-left: 0;
            border-right: 0;
            width: 1510px;
        }
        .shopcar{
            font-size: 70px;
            margin-top: 30px;
            font-weight: bold;
            margin-left: 648px;
        }
        .daogou{
            margin-left: 130px;
            font-size: 13px;
            margin-top: 60px;
            font-weight: bold;
            border: 1px solid #0000001f;
            border-top: 0;
            border-right: 0;
            border-left: 0;
            width: 1255px;
            height: 25px;
        }
        .foot{
            border: 1px solid #7474743d;
            height: 300px;
            border-top: 0;
            border-left: 0;
            border-right: 0;
            margin-left: 130px;
            width: 1255px;
        }
        .shopcar2{
            font-size: 55px;
            font-weight: bold;
            color: #a2a39b;
            width: 551px;
            margin-left: 750px;
            margin-top: 97px;
        }
        .jiesuan{
            height: 30px;
            width: 70px;
            background-color: white;
            border-radius: 9px;
            color: #827e7e;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div>
    <div class="shopcar">
        购物车
    </div>
    <div class="daogou">
        <span>商品名称</span>
        <span style="margin-left: 545px">数量</span>
        <span style="margin-left: 340px">单价</span>
    </div>
    <div id="no1">
        <div style="margin-left: 129px;margin-top: 30px"id="goodsdiv">
            <a href="../index2/index2.html"><img src="../picture/裁缝剪轮播.jpg"  width="260"id="imggoods"/></a>
        </div>
        <div style="margin-top: -63px;margin-left: 414px;font-weight: bold;"id="goods">
            裁缝剪
        </div>
        <div style=" margin-left: 732px;margin-top: -20px;">
            <div><input type="button"id="minus" value="-" style="width: 20px;border: 1px solid;background-color: #f5deb300;height: 20px;text-align: center;cursor: pointer" ></div>
            <div style="margin-top: -22.5px;margin-left: 20px;"><input type="text"id="content" style="width: 28px;border: 1px solid;border-left: 0; height: 16px;border-right: 0;text-align: center"value="1"></div>
            <div style="margin-top: -23px;margin-left: 48px;"><input type="button"id="add" value="+" style="width: 20px;border: 1px solid;background-color: #f5deb300;height: 20px;text-align: center;cursor: pointer"></div>
        </div>
        <div style="font-weight: bold;font-size: 13px;margin-top: -17px;margin-left: 1099px;"id="price138">
            ￥138
        </div>
        <div class="foot">
        </div>
    </div>
    <div style="display: none" id="dia">
        你的购物车空空如也，快去选购你心爱的商品吧！
    </div>
    <div id="result33"></div>
    <div style=" font-size: 50px;margin-left: 1070px;"id="add2">
        总计：
        <div style="margin-top: -65px;margin-left: 184px;"id="price"></div>
    </div>
    <div style="margin-left: 1322px;margin-top: 25px;">
        <a><input type="submit"value="立即结算" class="jiesuan"id="jiesuan"onclick="jiesuan1()"onmouseenter="jiesuan3()"onmouseleave="jiesuan2()"></a>
    </div>
   <form action="/insertform"method="post">
       <input type="text"id="sname222"style="display: none"name="fname">
       <input type="text"id="fnum"style="display: none"name="fnum">
       <input type="text"id="fprice"style="display: none"name="fprice">
       <input type="submit"id="delete2"style="display: none">
   </form>
</div>
<footer style="    margin-top: -1120px;position: absolute;margin-left: 76px;"id="footer_shopcar">
    <div class="img9">
        <a href="../about%20sharp/about%20sharp.html" target="_blank"><img src="../picture/关于Sharp.png" height="50" width="100"/></a>
        <a href="http://localhost:3019/wuliu"target="_blank"><img src="../picture/物流信息.png" height="50" width="100"/></a>
        <a href="../order%20status/order%20status.html"target="_blank"><img src="../picture/订单状态.png" height="50" width="100"/></a>
        <a href="../Returns%20a%20replacement/Returns%20a%20replacement.html"target="_blank"><img src="../picture/退货换货.png" height="50" width="100"/></a>
        <a href="../policy/policy.html"target="_blank"><img src="../picture/相关政策.png" height="50" width="100"/></a>
        <a href="../Common%20problems/Common%20problems.html"target="_blank"><img src="../picture/常见问题.png" height="50" width="100"/></a>
        <a href="../Contact%20us/Contact%20us.html"target="_blank"><img src="../picture/联系我们.png" height="50" width="100"/></a>
        <a href="../join%20us/join%20us.html"target="_blank"><img src="../picture/加入我们.png" height="50" width="100"/></a>
    </div>
    <p class="p7">订阅Sharp最新动态</p>
    <form action="" method="get" style="height: 100px">
        <div class="relative3">
            <input type="text" name="email" size="56" maxlength="24" value=" Email.." style="color: darkgray ;height: 30px ;width: 350px;border-color: black;"id="sub"onclick="clearme1()">
        </div>
        <div class="relative4">
            <input type="button" value="订阅" style="height: 38px;width: 70px ;background: #1f1a1a;color: #FFFFFF;font-weight: bold;border: none;border-color: black"id="sub1"onclick="sub11()">
        </div>
        <div class="img10">
            <a href="https://weixin.qq.com/" target="_blank"> <img src="../picture/微信.png" height="30" width="30"/></a>
            <a href="https://weibo.com/" target="_blank"> <img src="../picture/微博.png" height="30" width="30"/></a>
            <a href="http://www.tui-te.com/" target="_blank">    <img src="../picture/twitter新.png" height="30" width="30"/></a>
            <a href="https://m.facebook.com/" target="_blank">    <img src="../picture/Facebook.png" height="30" width="30"/></a>
            <a href="http://instagram.com/" target="_blank">   <img src="../picture/ins新.png" height="30" width="30"/></a>
        </div>
    </form>
</footer>
</body>
<script type="text/javascript">
    (function() {

        var httpRequest;
        var price138=document.getElementById("price138");
        if(price138){
           s();
        }
        //Ajax POST File

        function s() {
            makeRequest3('/searchshopcar');
        };
        function makeRequest3(url) {
            httpRequest = new XMLHttpRequest();

            if (!httpRequest) {
                alert('Giving up :( Cannot create an XMLHTTP instance');
                return false;
            }
            httpRequest.onreadystatechange = alertContents3;
            httpRequest.open('POST', url);
            httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            httpRequest.send();
        }

        function alertContents3() {
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
                if (httpRequest.status === 200) {
                    var response = JSON.parse(httpRequest.responseText);
                    // alert(response.computedString);
                    var gname=" ";
                    var gimg=" ";
                    var gprice=" ";
                    var ga=" ";
                    var gnum=" ";
                    gname=response.shopcar[0].pname;
                    gimg=response.shopcar[0].purl;
                    gprice=response.shopcar[0].price;
                    ga=response.shopcar[0].pa;
                    gnum=response.shopcar[0].snum;
                    document.getElementById("goodsdiv").innerHTML=ga+gimg+'</a>';
                    document.getElementById("goods").innerHTML=gname;
                    document.getElementById("price138").innerHTML=gprice;
                    document.getElementById("content").value=gnum;
                    document.getElementById("price").innerText='￥'+parseFloat(gnum)*parseFloat(gprice);

                } else {
                    console.log(httpRequest.status, httpRequest.responseText )
                    //alert('There was a problem with the request.');
                }
            }
        }
    })();
</script>
<script type="text/javascript">
    (function() {
        var httpRequest;
        var a=document.getElementById("content");
        var d=parseInt(document.getElementById("content").value);
        var e1=document.getElementById("dia");
        var add2=document.getElementById("add2");
        document.getElementById("add").onclick = function() {
            a.value=d++;
            var userName = document.getElementById("content").value;
            var userName2=document.getElementById("price138").innerHTML;
            var allprice=document.getElementById("price")
            allprice.innerText=parseFloat(userName)*parseFloat(userName2);

        };
        document.getElementById("minus").onclick = function() {
            if(d>=0)
            {a.value=d--;
                var userName = document.getElementById("content").value;
                var userName2=document.getElementById("price138").innerHTML;
                var allprice=document.getElementById("price")
                allprice.innerText=parseFloat(userName)*parseFloat(userName2);

            }
            else{
                var w=document.getElementById("no1");
                w.style.display="none";
                add2.style.display="none";
                e1.style.display="block";
                e1.className="shopcar2";

            }


        };

        // function makeRequest3(url,userName,userName2) {
        //     httpRequest = new XMLHttpRequest();
        //
        //     if (!httpRequest) {
        //         alert('Giving up :( Cannot create an XMLHTTP instance');
        //         return false;
        //     }
        //     httpRequest.onreadystatechange = alertContents3;
        //     httpRequest.open('POST', url);
        //     httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        //     httpRequest.send('userName2=' + encodeURIComponent(userName,userName2));
        // }
        //
        // function alertContents3() {
        //     if (httpRequest.readyState === XMLHttpRequest.DONE) {
        //         if (httpRequest.status === 200) {
        //             document.getElementById("price").innerHTML = JSON.parse(httpRequest.responseText).computedString;
        //         } else {
        //             alert('There was a problem with the request.');
        //         }
        //     }
        // }
    })();
</script>
<script>
    var b=document.getElementById("person");
    if(!b){
        var w=document.getElementById("no1");
        var e1=document.getElementById("dia");
        var add2=document.getElementById("add2");
        w.style.display="none";
        add2.style.display="none";
        e1.style.display="block";
        e1.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;你还没登录啊<br><br>";
        e1.className="shopcar2";
    }
</script>
<script>
     function jiesuan3() {
        var w=document.getElementById("jiesuan");
        w.style.backgroundColor="black";
        w.style.color="white";
    }
       function jiesuan2() {
        var q=document.getElementById("jiesuan");
        q.style.backgroundColor="white";
        q.style.color="#827e7e";
    }
      function jiesuan1() {
        alert("结算成功");
        window.open("http://localhost:3019/form");
          var w=document.getElementById("no1");
          var q=document.getElementById("jiesuan");
          var e1=document.getElementById("dia");
          var add2=document.getElementById("add2");
          var delete1=document.getElementById("sname222");
          var delete2=document.getElementById("delete2");
          var v=document.getElementById("goods").innerHTML;
          var content=document.getElementById("content").innerHTML;
          var fnum=document.getElementById("fnum");
          var fprice=document.getElementById("fprice");
          var userName2=document.getElementById("price138").innerHTML;
          var userName = document.getElementById("content").value;
          delete1.value=v;
          fnum.value=content;
          fprice.value=parseFloat(userName)*parseFloat(userName2);
          delete2.click();
          w.style.display="none";
          add2.style.display="none";
          e1.style.display="block";
          e1.className="shopcar2";
          q.style.display="none";
    }
</script>
</html>